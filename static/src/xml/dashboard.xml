<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="lms.Dashboard" owl="1">
        <div class="lms-dashboard-container">

            <!-- Sidebar -->
            <aside class="lms-sidebar">
                <div class="lms-logo">ðŸšš Logistics Management</div>

                <ul class="lms-menu">
                    <!-- Lead -->
                    <li t-on-click="() => setActiveSection('lead')" t-att-class="{'active': state.tab === 'lead'}">
                        Lead Management
                    </li>

                    <!-- Warehouse -->
                    <li t-on-click="() => setActiveSection('warehouse')" t-att-class="{'active': state.tab === 'warehouse'}">
                        Warehouse Management
                    </li>

                    <!-- Dispatch Management -->
                    <li>
                        <div t-on-click="() => toggleSubMenu('dispatch')" class="menu-header">
                            <span>Dispatch Management</span>
                            <span class="arrow" t-esc="state.expanded.dispatch ? 'â–¾' : 'â–¸'"/>
                        </div>
                        <ul t-if="state.expanded.dispatch" class="submenu">
                            <li t-on-click="() => setActiveSection('trip_sheet')">Trip Sheet</li>
                            <li t-on-click="() => setActiveSection('route_dispatch')">Route Dispatch</li>
                            <li t-on-click="() => setActiveSection('lr')">Lorry Receipt (LR)</li>
                            <li t-on-click="() => setActiveSection('pod')">Proof of Delivery (POD)</li>
                            <li t-on-click="() => setActiveSection('ewaybill')">E-Way Bill</li>
                            <li t-on-click="() => setActiveSection('dispatch_reports')">Dispatch Reports</li>
                        </ul>
                    </li>

                    <!-- Logistics Operations -->
                    <li>
                        <div t-on-click="() => toggleSubMenu('operations')" class="menu-header">
                            <span>Logistics Operations</span>
                            <span class="arrow" t-esc="state.expanded.operations ? 'â–¾' : 'â–¸'"/>
                        </div>
                        <ul t-if="state.expanded.operations" class="submenu">
                            <li t-on-click="() => setActiveSection('fleet_overview')">Fleet Overview</li>
                            <li t-on-click="() => setActiveSection('vehicle_costs')">Vehicle Costs</li>
                            <li t-on-click="() => setActiveSection('odoometer')">Odometer</li>
                            <li t-on-click="() => setActiveSection('route_optimization')">Route Optimization</li>
                            <li t-on-click="() => setActiveSection('fleet_reports')">Fleet Reports</li>
                        </ul>
                    </li>

                    <!-- Finance and Accounting -->
                    <li>
                        <div t-on-click="() => toggleSubMenu('finance')" class="menu-header">
                            <span>Finance &amp; Accounting</span>
                            <span class="arrow" t-esc="state.expanded.finance ? 'â–¾' : 'â–¸'"/>
                        </div>
                        <ul t-if="state.expanded.finance" class="submenu">
                            <li t-on-click="() => setActiveSection('finance_overview')">Overview</li>
                            <li t-on-click="() => setActiveSection('customer_invoices')">Customer Invoices</li>
                            <li t-on-click="() => setActiveSection('customer_credit_notes')">Customer Credit Notes</li>
                            <li t-on-click="() => setActiveSection('customer_payments')">Customer Payments</li>
                            <li t-on-click="() => setActiveSection('accounting_journals')">Accounting Journals</li>
                            <li t-on-click="() => setActiveSection('accounting_journals_entries')">Journal Entries</li>
                            <li t-on-click="() => setActiveSection('vendor_payments')">Bills</li>
                        </ul>
                    </li>

                    <!-- RFQ -->
                    <li t-on-click="() => setActiveSection('rfq')" t-att-class="{'active': state.tab === 'rfq'}">
                        RFP/RFQ
                    </li>

                    <!-- Reporting -->
                    <li>
                        <div t-on-click="() => toggleSubMenu('reporting')" class="menu-header">
                            <span>Reporting</span>
                            <span class="arrow" t-esc="state.expanded.reporting ? 'â–¾' : 'â–¸'"/>
                        </div>
                        <ul t-if="state.expanded.reporting" class="submenu">
                            <!-- Sales Reporting -->
                            <li>
                                <div t-on-click="() => toggleSubMenu('sales_reporting')" class="menu-header submenu-header">
                                    <span>Sales</span>
                                    <span class="arrow" t-esc="state.expanded.sales_reporting ? 'â–¾' : 'â–¸'"/>
                                </div>
                                <ul t-if="state.expanded.sales_reporting" class="submenu nested">
                                    <li t-on-click="() => setActiveSection('sales')">Lead Sales</li>
                                    <li t-on-click="() => setActiveSection('sales_persons')">Sales Persons</li>
                                    <li t-on-click="() => setActiveSection('sales_products')">Products</li>
                                </ul>
                            </li>

                            <!-- Inventory/Warehouse Reporting -->
                            <li>
                                <div t-on-click="() => toggleSubMenu('inventory_warehouse_reporting')" class="menu-header submenu-header">
                                    <span>Inventory &amp; Warehouse</span>
                                    <span class="arrow" t-esc="state.expanded.inventory_warehouse_reporting ? 'â–¾' : 'â–¸'"/>
                                </div>
                                <ul t-if="state.expanded.inventory_warehouse_reporting" class="submenu nested">
                                    <li t-on-click="() => setActiveSection('overview')">Overview</li>
                                    <li t-on-click="() => setActiveSection('warehouse_analysis')">Warehouse Analysis</li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
            </aside>

            <!-- Main Content -->
            <main class="lms-main">
                <t t-if="state.iframeSrc">
                    <div class="iframe-container">
                        <iframe t-key="state.iframeKey" t-att-src="state.iframeSrc" frameborder="0"/>
                    </div>
                </t>
                <t t-if="!state.iframeSrc">
                    <div class="welcome-container">
                        <p>ðŸ‘‹ Welcome â€” Select a module from the sidebar to begin.</p>
                    </div>
                </t>
            </main>
        </div>
    </t>
</templates>